for (i in 1:n) {
current <- ants_list[[i]] %>% as.array() %>% as.vector()
vec_list[[i]] <- current[current != 0]
}
vals <- vec_list %>% unlist()
vals_samp <- vals %>% sample(p * length(vals))
return(vals_samp)
}
plot_densities <- function (raw, transformed) {
coupling_vals <- data.frame(raw = raw, transformed = transformed) %>%
pivot_longer(everything(),
names_to = "type",
values_to = "coupling_vals")
ggplot(data = coupling_vals, aes(x = coupling_vals, fill = type)) +
geom_density(alpha = 0.4)
}
isla_abs_g <- load_coupling_vals("ALFF_IDEMO_ISLA_abs", "global_wcov")
isla_abs_u <- load_coupling_vals("ALFF_IDEMO_ISLA_abs", "unscaled_wcor")
?geom_density
plot_densities <- function (raw, transformed) {
coupling_vals <- data.frame(raw = raw, transformed = transformed) %>%
pivot_longer(everything(),
names_to = "type",
values_to = "coupling_vals")
ggplot(data = coupling_vals, aes(x = coupling_vals, fill = type)) +
geom_density(alpha = 0.4) +
theme_classic()
}
plot_densities(isla_abs_g, isla_abs_g * 3)
plot_densities(isla_abs_g, log(isla_abs_g * 3 - 1))
min(isla_abs_g)
summary(isla_abs_g)
load_coupling_vals <- function (dir, pca_type = c("global_wcov", "unscaled_wcor"), n = 50, p = 0.5) {
coupling_files <- file.path(here(".."), dir, "output/niftis/coupled/", pca_type) %>%
list.files(full.names = TRUE) %>%
sample(n)
ants_list <- check_ants(coupling_files)
vec_list <- vector("list", length = n)
for (i in 1:n) {
current <- ants_list[[i]] %>% as.array() %>% as.vector()
vec_list[[i]] <- current[current != 0]
}
vals <- vec_list %>% unlist()
vals_samp <- vals %>% sample(p * length(vals))
return(vals_samp)
}
plot_densities <- function (raw, transformed) {
coupling_vals <- data.frame(raw = raw, transformed = transformed) %>%
pivot_longer(everything(),
names_to = "type",
values_to = "coupling_vals")
print(summary(raw))
print(summary(transformed))
ggplot(data = coupling_vals, aes(x = coupling_vals, fill = type)) +
geom_density(alpha = 0.4) +
theme_classic()
}
plot_densities(isla_abs_g, log(isla_abs_g * 3 - 1))
?summary
load_coupling_vals <- function (dir, pca_type = c("global_wcov", "unscaled_wcor"), n = 50, p = 0.5) {
coupling_files <- file.path(here(".."), dir, "output/niftis/coupled/", pca_type) %>%
list.files(full.names = TRUE) %>%
sample(n)
ants_list <- check_ants(coupling_files)
vec_list <- vector("list", length = n)
for (i in 1:n) {
current <- ants_list[[i]] %>% as.array() %>% as.vector()
vec_list[[i]] <- current[current != 0]
}
vals <- vec_list %>% unlist()
vals_samp <- vals %>% sample(p * length(vals))
return(vals_samp)
}
plot_densities <- function (raw, transformed) {
coupling_vals <- data.frame(raw = raw, transformed = transformed) %>%
pivot_longer(everything(),
names_to = "type",
values_to = "coupling_vals")
print(summary(raw))
var(raw)
print(summary(transformed))
var(transformed)
ggplot(data = coupling_vals, aes(x = coupling_vals, fill = type)) +
geom_density(alpha = 0.4) +
theme_classic()
}
plot_densities(isla_abs_g, log(isla_abs_g * 3 - 1))
load_coupling_vals <- function (dir, pca_type = c("global_wcov", "unscaled_wcor"), n = 50, p = 0.5) {
coupling_files <- file.path(here(".."), dir, "output/niftis/coupled/", pca_type) %>%
list.files(full.names = TRUE) %>%
sample(n)
ants_list <- check_ants(coupling_files)
vec_list <- vector("list", length = n)
for (i in 1:n) {
current <- ants_list[[i]] %>% as.array() %>% as.vector()
vec_list[[i]] <- current[current != 0]
}
vals <- vec_list %>% unlist()
vals_samp <- vals %>% sample(p * length(vals))
return(vals_samp)
}
plot_densities <- function (raw, transformed) {
coupling_vals <- data.frame(raw = raw, transformed = transformed) %>%
pivot_longer(everything(),
names_to = "type",
values_to = "coupling_vals")
print(summary(raw))
print(var(raw))
print(summary(transformed))
print(var(transformed))
ggplot(data = coupling_vals, aes(x = coupling_vals, fill = type)) +
geom_density(alpha = 0.4) +
theme_classic()
}
plot_densities(isla_abs_g, log(isla_abs_g * 3 - 1))
plot_densities(isla_abs_g, exp(isla_abs_g * 3 - 1))
list(c(1, 2))
list(1, 2, {})
list(1, 2, 3)
list(1, 2, 3) %>% typeof()
1:3 %>% typeof()
plot_densities <- function (raw, transformed) {
transform_num <- length(transformed)
for (i in 1:length(transformed)) {
coupling_vals <- data.frame(raw = raw) %>%
cbind(transformed[[i]])
}
coupling_vals <- coupling_vals %>%
pivot_longer(everything(),
names_to = "type",
values_to = "coupling_vals")
ggplot(data = coupling_vals, aes(x = coupling_vals, fill = type)) +
geom_density(alpha = 0.4) +
theme_classic()
}
plot_densities(isla_abs_g, log(isla_abs_g * 3 - 1))
load_coupling_vals <- function (dir, pca_type = c("global_wcov", "unscaled_wcor"), n = 50, p = 0.5) {
coupling_files <- file.path(here(".."), dir, "output/niftis/coupled/", pca_type) %>%
list.files(full.names = TRUE) %>%
sample(n)
ants_list <- check_ants(coupling_files)
vec_list <- vector("list", length = n)
for (i in 1:n) {
current <- ants_list[[i]] %>% as.array() %>% as.vector()
vec_list[[i]] <- current[current != 0]
}
vals <- vec_list %>% unlist()
vals_samp <- vals %>% sample(p * length(vals))
return(vals_samp)
}
isla_abs_g <- load_coupling_vals("ALFF_IDEMO_ISLA_abs", "global_wcov", p = 0.2)
isla_abs_u <- load_coupling_vals("ALFF_IDEMO_ISLA_abs", "unscaled_wcor", p = 0.2)
plot_densities(isla_abs_g, log(isla_abs_g * 3 - 1))
plot_densities(isla_abs_g, list(log(isla_abs_g * 3 - 1)))
library(matrixStats)
plot_densities <- function (raw, transformed) {
transform_num <- length(transformed)
for (i in 1:length(transformed)) {
coupling_vals <- data.frame(raw = raw) %>%
cbind(transformed[[i]])
}
coupling_vals <- coupling_vals %>%
pivot_longer(everything(),
names_to = "type",
values_to = "coupling_vals")
print(summary(coupling_vals))
print(colVars(coupling_vals))
ggplot(data = coupling_vals, aes(x = coupling_vals, fill = type)) +
geom_density(alpha = 0.4) +
theme_classic()
}
plot_densities(isla_abs_g, list(log(isla_abs_g * 3 - 1),
))
x <- rnorm(10000)
var(sample(x, 10))
var(sample(x, 10))
var(sample(x, 10))
var(sample(x, 10))
var(sample(x, 10))
var(sample(x, 10))
var(sample(x, 10))
var(sample(x, 10))
exp(isla_abs))
plot_densities(isla_abs_g, list(isla_abs_g * 3 - 1))
load_coupling_vals <- function (dir, pca_type = c("global_wcov", "unscaled_wcor"), n = 50, p = 0.5) {
coupling_files <- file.path(here(".."), dir, "output/niftis/coupled/", pca_type) %>%
list.files(full.names = TRUE) %>%
sample(n)
ants_list <- check_ants(coupling_files)
vec_list <- vector("list", length = n)
for (i in 1:n) {
current <- ants_list[[i]] %>% as.array() %>% as.vector()
vec_list[[i]] <- current[current != 0]
}
vals <- vec_list %>% unlist()
vals_samp <- vals %>% sample(p * length(vals))
return(vals_samp)
}
plot_densities <- function (raw, transformed) {
transform_num <- length(transformed)
for (i in 1:length(transformed)) {
coupling_vals <- data.frame(raw = raw) %>%
cbind(transformed[[i]])
}
coupling_vals <- coupling_vals %>%
pivot_longer(everything(),
names_to = "type",
values_to = "coupling_vals")
print(summary(coupling_vals))
print(colVars(coupling_vals %>% as.matrix()))
ggplot(data = coupling_vals, aes(x = coupling_vals, fill = type)) +
geom_density(alpha = 0.4) +
theme_classic()
}
plot_densities(isla_abs_g, list(isla_abs_g * 3 - 1))
plot_densities <- function (raw, transformed) {
transform_num <- length(transformed)
for (i in 1:length(transformed)) {
coupling_vals <- data.frame(raw = raw) %>%
cbind(transformed[[i]])
print(var(transformed[[i]]))
}
coupling_vals <- coupling_vals %>%
pivot_longer(everything(),
names_to = "type",
values_to = "coupling_vals")
print(summary(coupling_vals))
ggplot(data = coupling_vals, aes(x = coupling_vals, fill = type)) +
geom_density(alpha = 0.4) +
theme_classic()
}
plot_densities(isla_abs_g, list(isla_abs_g * 3 - 1))
plot_densities(isla_abs_g, list(isla_abs_g * 1.5 - 2))
plot_densities(isla_abs_g, list(isla_abs_g * 1.5 - 0.5))
(1:10) ^2
plot_densities(isla_abs_g, list(isla_abs_g_norm,
isla_abs_g_norm %>% log(),
isla_abs_g_norm ^ 2,
log(isla_abs_g_norm) - log(1 - isla_abs_g_norm),
isla_abs_g_norm ^ 0.5 - (1 - isla_abs_g_norm) ^ 0.5))
isla_abs_g_norm <- isla_abs_g * 1.5 - 0.5
plot_densities(isla_abs_g, list(isla_abs_g_norm,
isla_abs_g_norm %>% log(),
isla_abs_g_norm ^ 2,
log(isla_abs_g_norm) - log(1 - isla_abs_g_norm),
isla_abs_g_norm ^ 0.5 - (1 - isla_abs_g_norm) ^ 0.5))
plot_densities <- function (raw, transformed) {
transform_num <- length(transformed)
browser()
for (i in 1:length(transformed)) {
coupling_vals <- data.frame(raw = raw) %>%
cbind(transformed[[i]])
print(var(transformed[[i]]))
}
coupling_vals <- coupling_vals %>%
pivot_longer(everything(),
names_to = "type",
values_to = "coupling_vals")
print(summary(coupling_vals))
ggplot(data = coupling_vals, aes(x = coupling_vals, fill = type)) +
geom_density(alpha = 0.4) +
theme_classic()
}
plot_densities(isla_abs_g, list(isla_abs_g_norm,
isla_abs_g_norm %>% log(),
isla_abs_g_norm ^ 2,
log(isla_abs_g_norm) - log(1 - isla_abs_g_norm),
isla_abs_g_norm ^ 0.5 - (1 - isla_abs_g_norm) ^ 0.5))
transformed
plot_densities(isla_abs_g, list(isla_abs_g_norm,
isla_abs_g_norm %>% log(),
isla_abs_g_norm ^ 2,
log(isla_abs_g_norm) - log(1 - isla_abs_g_norm),
isla_abs_g_norm ^ 0.5 - (1 - isla_abs_g_norm) ^ 0.5))
q
Q
plot_densities <- function (raw, transformed) {
transform_num <- length(transformed)
browser()
coupling_vals <- data.frame(raw = raw)
for (i in 1:length(transformed)) {
coupling_vals <- coupling_vals %>%
cbind(transformed[[i]])
print(var(transformed[[i]]))
}
coupling_vals <- coupling_vals %>%
pivot_longer(everything(),
names_to = "type",
values_to = "coupling_vals")
print(summary(coupling_vals))
ggplot(data = coupling_vals, aes(x = coupling_vals, fill = type)) +
geom_density(alpha = 0.4) +
theme_classic()
}
plot_densities(isla_abs_g, list(isla_abs_g_norm,
isla_abs_g_norm %>% log(),
isla_abs_g_norm ^ 2,
log(isla_abs_g_norm) - log(1 - isla_abs_g_norm),
isla_abs_g_norm ^ 0.5 - (1 - isla_abs_g_norm) ^ 0.5))
isla_abs_g <- load_coupling_vals("ALFF_IDEMO_ISLA_abs", "global_wcov", p = 0.05)
isla_abs_u <- load_coupling_vals("ALFF_IDEMO_ISLA_abs", "unscaled_wcor", p = 0.05)
isla_abs_g <- load_coupling_vals("ALFF_IDEMO_ISLA_abs", "global_wcov", p = 0.01)
isla_abs_u <- load_coupling_vals("ALFF_IDEMO_ISLA_abs", "unscaled_wcor", p = 0.01)
hist(isla_abs_g)
isla_abs_g_norm <- isla_abs_g * 1.5 - 0.5
isla_abs_u_norm <- isla_abs_u * 1.5 - 0.5
rm(x)
plot_densities <- function (raw, transformed) {
transform_num <- length(transformed)
coupling_vals <- data.frame(raw = raw)
for (i in 1:length(transformed)) {
coupling_vals <- coupling_vals %>%
cbind(transformed[[i]])
print(var(transformed[[i]]))
}
print(summary(coupling_vals))
coupling_vals <- coupling_vals %>%
pivot_longer(everything(),
names_to = "type",
values_to = "coupling_vals")
ggplot(data = coupling_vals, aes(x = coupling_vals, fill = type)) +
geom_density(alpha = 0.4) +
theme_classic()
}
plot_densities(isla_abs_g, list(isla_abs_g_norm,
isla_abs_g_norm %>% log(),
isla_abs_g_norm ^ 2,
log(isla_abs_g_norm) - log(1 - isla_abs_g_norm),
isla_abs_g_norm ^ 0.5 - (1 - isla_abs_g_norm) ^ 0.5))
plot_densities <- function (raw, transformed) {
transform_num <- length(transformed)
coupling_vals <- data.frame(raw = raw)
for (i in 1:length(transformed)) {
coupling_vals <- coupling_vals %>%
cbind(transformed[[i]])
print(var(transformed[[i]]))
}
print(summary(coupling_vals))
browser()
coupling_vals <- coupling_vals %>%
pivot_longer(everything(),
names_to = "type",
values_to = "coupling_vals")
ggplot(data = coupling_vals, aes(x = coupling_vals, fill = type)) +
geom_density(alpha = 0.4) +
theme_classic()
}
plot_densities(isla_abs_g, list(isla_abs_g_norm,
isla_abs_g_norm %>% log(),
isla_abs_g_norm ^ 2,
log(isla_abs_g_norm) - log(1 - isla_abs_g_norm),
isla_abs_g_norm ^ 0.5 - (1 - isla_abs_g_norm) ^ 0.5))
paste("hello", 1:5)
?stop
plot_densities <- function (raw, transformed) {
if (typeof(transformed) != "list") {
stop("Transformed must be of type \'list\'")
}
coupling_vals <- data.frame(raw = raw)
for (i in 1:length(transformed)) {
coupling_vals <- coupling_vals %>%
cbind(transformed[[i]])
print(var(transformed[[i]]))
}
names(coupling_vals) = c("raw", paste0("tx", 1:length(transformed)))
print(summary(coupling_vals))
browser()
coupling_vals <- coupling_vals %>%
pivot_longer(everything(),
names_to = "type",
values_to = "coupling_vals")
ggplot(data = coupling_vals, aes(x = coupling_vals, fill = type)) +
geom_density(alpha = 0.4) +
theme_classic()
}
plot_densities(isla_abs_g, list(isla_abs_g_norm,
isla_abs_g_norm %>% log(),
isla_abs_g_norm ^ 2,
log(isla_abs_g_norm) - log(1 - isla_abs_g_norm),
isla_abs_g_norm ^ 0.5 - (1 - isla_abs_g_norm) ^ 0.5))
plot_densities(isla_abs_g, list(isla_abs_g_norm %>% log(),
isla_abs_g_norm ^ 2,
log(isla_abs_g_norm) - log(1 - isla_abs_g_norm),
isla_abs_g_norm ^ 0.5 - (1 - isla_abs_g_norm) ^ 0.5))
plot_densities <- function (raw, transformed) {
if (typeof(transformed) != "list") {
stop("Transformed must be of type \'list\'")
}
coupling_vals <- data.frame(raw = raw)
for (i in 1:length(transformed)) {
coupling_vals <- coupling_vals %>%
cbind(transformed[[i]])
print(var(transformed[[i]]))
}
names(coupling_vals) = c("raw", paste0("tx", 1:length(transformed)))
print(summary(coupling_vals))
coupling_vals <- coupling_vals %>%
pivot_longer(everything(),
names_to = "type",
values_to = "coupling_vals")
ggplot(data = coupling_vals, aes(x = coupling_vals, fill = type)) +
geom_density(alpha = 0.4) +
theme_classic()
}
plot_densities(isla_abs_g, list(isla_abs_g_norm %>% log(),
isla_abs_g_norm ^ 2,
log(isla_abs_g_norm) - log(1 - isla_abs_g_norm),
isla_abs_g_norm ^ 0.5 - (1 - isla_abs_g_norm) ^ 0.5))
plot_densities(isla_abs_g, list(isla_abs_g_norm %>% log(),
isla_abs_g_norm ^ 2,
log(isla_abs_g_norm) - log(1 - isla_abs_g_norm),
isla_abs_g_norm ^ 0.33 - (1 - isla_abs_g_norm) ^ 0.33))
plot_densities(isla_abs_g, list(isla_abs_g_norm %>% log(),
isla_abs_g_norm ^ 2,
log(isla_abs_g_norm) - log(1 - isla_abs_g_norm),
isla_abs_g_norm ^ 0.1 - (1 - isla_abs_g_norm) ^ 0.1))
plot_densities(isla_abs_g, list(isla_abs_g_norm %>% log(),
isla_abs_g_norm ^ 2,
log(isla_abs_g_norm) - log(1 - isla_abs_g_norm),
isla_abs_g_norm ^ 3 - (1 - isla_abs_g_norm) ^ 3))
plot_densities(isla_abs_g, list(isla_abs_g_norm %>% log(),
isla_abs_g_norm ^ 2,
log(isla_abs_g_norm) - log(1 - isla_abs_g_norm),
isla_abs_g_norm ^ 10 - (1 - isla_abs_g_norm) ^ 10))
plot_densities(isla_abs_g, list(isla_abs_g_norm %>% log(),
isla_abs_g_norm ^ 2,
log(isla_abs_g_norm) - log(1 - isla_abs_g_norm),
isla_abs_g_norm ^ .5 - (1 - isla_abs_g_norm) ^ .5))
plot_densities(isla_abs_u, list(isla_abs_u_norm %>% log(),
isla_abs_u_norm ^ 2,
log(isla_abs_u_norm) - log(1 - isla_abs_u_norm),
isla_abs_u_norm ^ .5 - (1 - isla_abs_u_norm) ^ .5))
isla_abs_g <- load_coupling_vals("ALFF_IDEMO_ISLA", "global_wcov", p = 0.01)
isla_abs_u <- load_coupling_vals("ALFF_IDEMO_ISLA", "unscaled_wcor", p = 0.01)
isla_g_norm <- isla_g * 1.5 - 0.5
isla_u_norm <- isla_u * 1.5 - 0.5
plot_densities(isla_g, list(isla_g_norm %>% log(),
isla_g_norm ^ 2,
log(isla_g_norm) - log(1 - isla_g_norm),
isla_g_norm ^ .5 - (1 - isla_g_norm) ^ .5))
plot_densities(isla_u, list(isla_u_norm %>% log(),
isla_u_norm ^ 2,
log(isla_u_norm) - log(1 - isla_u_norm),
isla_u_norm ^ .5 - (1 - isla_u_norm) ^ .5))
isla_g <- load_coupling_vals("ALFF_IDEMO_ISLA", "global_wcov", n = 50, p = 0.01)
isla_u <- load_coupling_vals("ALFF_IDEMO_ISLA", "unscaled_wcor", n = 50, p = 0.01)
isla_g_norm <- isla_g * 1.5 - 0.5
isla_u_norm <- isla_u * 1.5 - 0.5
plot_densities(isla_g, list(isla_g_norm %>% log(),
isla_g_norm ^ 2,
log(isla_g_norm) - log(1 - isla_g_norm),
isla_g_norm ^ .5 - (1 - isla_g_norm) ^ .5))
plot_densities(isla_u, list(isla_u_norm %>% log(),
isla_u_norm ^ 2,
log(isla_u_norm) - log(1 - isla_u_norm),
isla_u_norm ^ .5 - (1 - isla_u_norm) ^ .5))
isla_abs_g <- load_coupling_vals("ALFF_IDEMO_ISLA_abs", "global_wcov", n = 50, p = 0.01)
isla_abs_u <- load_coupling_vals("ALFF_IDEMO_ISLA_abs", "unscaled_wcor", n = 50, p = 0.01)
library(tidyverse)
library(ANTsRCore)
library(extrantsr)
library(IMCo)
library(here)
library(matrixStats)
load_coupling_vals <- function (dir, pca_type = c("global_wcov", "unscaled_wcor"), n = 50, p = 0.5) {
coupling_files <- file.path(here(".."), dir, "output/niftis/coupled/", pca_type) %>%
list.files(full.names = TRUE) %>%
sample(n)
ants_list <- check_ants(coupling_files)
vec_list <- vector("list", length = n)
for (i in 1:n) {
current <- ants_list[[i]] %>% as.array() %>% as.vector()
vec_list[[i]] <- current[current != 0]
}
vals <- vec_list %>% unlist()
vals_samp <- vals %>% sample(p * length(vals))
return(vals_samp)
}
plot_densities <- function (raw, transformed) {
if (typeof(transformed) != "list") {
stop("Transformed must be of type \'list\'")
}
coupling_vals <- data.frame(raw = raw)
for (i in 1:length(transformed)) {
coupling_vals <- coupling_vals %>%
cbind(transformed[[i]])
print(var(transformed[[i]]))
}
names(coupling_vals) = c("raw", paste0("tx", 1:length(transformed)))
print(summary(coupling_vals))
coupling_vals <- coupling_vals %>%
pivot_longer(everything(),
names_to = "type",
values_to = "coupling_vals")
ggplot(data = coupling_vals, aes(x = coupling_vals, fill = type)) +
geom_density(alpha = 0.4) +
theme_classic()
}
isla_abs_g <- load_coupling_vals("ALFF_IDEMO_ISLA_abs", "global_wcov", n = 50, p = 0.01)
isla_abs_u <- load_coupling_vals("ALFF_IDEMO_ISLA_abs", "unscaled_wcor", n = 50, p = 0.01)
isla_abs_g_norm <- isla_abs_g * 1.5 - 0.5
isla_abs_u_norm <- isla_abs_u * 1.5 - 0.5
plot_densities(isla_abs_g, list(isla_abs_g_norm %>% log(),
isla_abs_g_norm ^ 2,
log(isla_abs_g_norm) - log(1 - isla_abs_g_norm),
isla_abs_g_norm ^ .5 - (1 - isla_abs_g_norm) ^ .5))
plot_densities(isla_abs_u, list(isla_abs_u_norm %>% log(),
isla_abs_u_norm ^ 2,
log(isla_abs_u_norm) - log(1 - isla_abs_u_norm),
isla_abs_u_norm ^ .5 - (1 - isla_abs_u_norm) ^ .5))
isla_g <- load_coupling_vals("ALFF_IDEMO_ISLA", "global_wcov", n = 50, p = 0.01)
isla_u <- load_coupling_vals("ALFF_IDEMO_ISLA", "unscaled_wcor", n = 50, p = 0.01)
