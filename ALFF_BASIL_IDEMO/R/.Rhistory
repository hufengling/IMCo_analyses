2.26^2
5.1076-2.24
sqrt(2.8676)
2.6+1.69
calculate_power <- function(x) {
pocock <- power.prop.test(n = 200, p1 = .20, p2 = x,
sig.level = pocock_2_first)
obf <- power.prop.test(n = 200, p1 = .20, p2 = x,
sig.level = obf_2_first)
return(list(pocock$power, obf$power))
}
power <- calculate_power(.34); power
# Chunk 1: setup
library(tidyverse)
library(ldbounds)
# Chunk 2
calculate_neff <- function (m, k, rho) {
k * m / (1 + (m - 1) * rho)
}
points <- 1:200
n_eff <- data.frame(x = points,
rho_0.05 = calculate_neff(points, 10, 0.05),
rho_0.4 = calculate_neff(points, 10, 0.5)) %>%
pivot_longer(cols = c("rho_0.05", "rho_0.4"),
names_to = "Rho",
values_to = "values")
ggplot(aes(x = x, y = values, color = Rho), data = n_eff) +
geom_line() +
labs(title = "Change in effective n as students per school increases") +
xlab("Students per school (m)") +
ylab("Effective n") +
theme_classic()
# Chunk 3
#calculating n_eff per arm for power.t.test
n_eff_0.05 <- calculate_neff(m = 10, k = 10, rho = 0.05)
n_eff_0.4 <- calculate_neff(m = 10, k = 10, rho = 0.4)
power.t.test(n = n_eff_0.05, power = 0.8, sig.level = 0.05)
power.t.test(n = n_eff_0.4, power = 0.8, sig.level = 0.05)
# Chunk 4
power.t.test(power = 0.8, delta = 0.5, sd = 1, sig.level = 0.05)
# Chunk 5
n_eff_0.3 <- calculate_neff(m = 200, k = 19, rho = 0.3); n_eff_0.3
# Chunk 6
orig_power <- power.prop.test(n = 200, p1 = .20, sig.level = 0.05, power = 0.9)
orig_power
# Chunk 7
pocock <- bounds(t = c(0.6, 1), iuse = c(2, 2), alpha = c(.025, .025))
plot(pocock)
pocock_final <- pnorm(pocock$upper.bounds[2], lower.tail = FALSE) +
pnorm(pocock$lower.bounds[2]); pocock_final
obf <- bounds(t = c(0.6, 1), iuse = c(1, 1), alpha = c(.025, .025))
plot(obf)
obf_final <- pnorm(obf$upper.bounds[2], lower.tail = FALSE) +
pnorm(obf$lower.bounds[2]); obf_final
# Chunk 8
pocock_power <- power.prop.test(n = 200, p1 = .20, sig.level = pocock_final, power = 0.9); pocock_power
obf_power <- power.prop.test(n = 200, p1 = .20, sig.level = obf_final, power = 0.9); obf_power
# Chunk 9
pocock_n <- power.prop.test(p1 = .20, p2 = orig_power$p2,
sig.level = pocock_final, power = 0.9); pocock_n
obf_n <- power.prop.test(p1 = .20, p2 = orig_power$p2,
sig.level = obf_final, power = 0.9); obf_n
# Chunk 10
pocock_2 <- bounds(t = c(0.2, 0.6, 1), iuse = c(2, 2), alpha = c(.025, .025))
plot(pocock_2)
pocock_2_first <- pnorm(pocock_2$upper.bounds[1], lower.tail = FALSE) +
pnorm(pocock_2$lower.bounds[1]); pocock_2_first
obf_2 <- bounds(t = c(0.2, 0.6, 1), iuse = c(1, 1), alpha = c(.025, .025))
plot(obf_2)
obf_2_first <- pnorm(obf_2$upper.bounds[1], lower.tail = FALSE) +
pnorm(obf_2$lower.bounds[1]); obf_2_first
calculate_power <- function(x) {
pocock <- power.prop.test(n = 200, p1 = .20, p2 = x,
sig.level = pocock_2_first)
obf <- power.prop.test(n = 200, p1 = .20, p2 = x,
sig.level = obf_2_first)
return(list(pocock$power, obf$power))
}
power <- calculate_power(.34); power
calculate_power <- function(x) {
pocock <- power.prop.test(n = 40, p1 = .20, p2 = x,
sig.level = pocock_2_first)
obf <- power.prop.test(n = 40, p1 = .20, p2 = x,
sig.level = obf_2_first)
return(list(pocock$power, obf$power))
}
power <- calculate_power(.34); power
obf_2
?bounds
obf_2_first <- pnorm(obf_2$upper.bounds[1], lower.tail = FALSE) +
pnorm(obf_2$lower.bounds[1]); obf_2_first
pocock_2
pocock_2_first <- pnorm(pocock_2$upper.bounds[1], lower.tail = FALSE) +
pnorm(pocock_2$lower.bounds[1]); pocock_2_first
pocock_2_first <- pnorm(pocock_2$upper.bounds[3], lower.tail = FALSE) +
pnorm(pocock_2$lower.bounds[3]); pocock_2_first
summary.bounds
bounds
landem
bounds
pbinom(85, 100, 0.8)
?pbinom
pbinom(84, 100, 0.8, lower.tail = FALSE)
1-pbinom(84, 100, 0.8)
ppois(1, 6.6384)
ppois(1, 6.6385)
ppois(1, 6.6383)
